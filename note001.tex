% !TEX root=main.tex

\section{Note 1}

\subsection{Product and coproduct}

\begin{definition}[Product]
	Given a category $\calC$ and objects $X_1,X_2\in\calC$, we say that $X_1\times X_2$ is the \emph{product} of these two sets if there exist morphisms $\pi_1:X_1\times X_2 \to X_1$ and $\pi_2:X_1\times X_2\to X_2$, usually referred to as `projections', satisfying the following universal property: for any pair of morphisms $f_1:Y\to X_1$ and $f_2:Y\to X_2$, there is a unique morphism $f:Y\to X_1\times X_2$ such that $f_1=\pi_1 \circ f$ and $f_2=\pi_2 \circ f$, i.e. the following diagram commutes;

	\begin{figure}[!ht]
	\centering
	\begin{tikzcd}
	& \arrow[dl,"f_1"'] Y \arrow[d,dashed,"f"] \arrow[dr,"f_2"] &\\
	X_1 & \arrow[l,"\pi_1"] X_1\times X_2 \arrow[r,"\pi_2"'] & X_2
	\end{tikzcd}
	\end{figure}
\end{definition}

More intuitively, any pair of function $f_1,f_2$ into $X_1,X_2$ respectively factorize uniquely through the product; we can `naturally' pass through it, and then `project' back to our original codomain.

For $\calC=\cat{Set}$, the product manifests as the \emph{cartesian product}, with projection on the coordinates.

\begin{definition}[Coproduct]
	Given a category $\calC$ and objects $X_1,X_2\in\calC$, we say that $X_1\coprod X_2$ is the \emph{coproduct} of these two sets if there exist morphisms $i_1:X_1\to X_1\coprod X_2$ and $i_2:X_2\to X_1\coprod X_2$, usually referred to as `inclusions', satisfying the following universal property: for any pair of morphisms $f_1:X_1\to Y$ and $f_2:X_2\to Y$, there is a unique morphism $f:X_1\coprod X_2\to Y$ such that $f_1=f\circ i_1$ and $f_2=f\circ i_2$, i.e. the following diagram commutes;

	\begin{figure}[ht!]
	\centering
	\begin{tikzcd}
	& Y &\\
	X_1 \arrow[ur,"f_1"] \arrow[r,"i_1"'] & \arrow[u,dashed,"f"] X_1\coprod X_2 & \arrow[l,"i_2"] \arrow[ul,"f_2"'] X_2
	\end{tikzcd}
	\end{figure}
\end{definition}

This is of course the dual concept to that of the product; any pair of morphisms $f_1,f_2$ from $X_1,X_2$ respectively factorize uniquely through the coproduct; we can pass through it by means of inclusion, and then `naturally' end up in our original codomain.

For $\calC=\cat{Set}$, the coproduct manifests as the \emph{disjoint union}, with inclusion by identification.

Both concepts can be readily generalized to families of sets; we denote the categorical product by $\prod_{\alpha\in A} X_\alpha$ and the categorical coproduct by $\sum_{\alpha\in A} X_\alpha$.



\subsection{First encounter with polynomial functors}

After a quick exposure to the basic concepts of category theory (spread through a long year), we introduce the concept of a \emph{polynomial functor} as a categorification of the usual arithmetic polynomial. We start with the easy one-variable case:

\begin{definition}
	Given two sets $E,B$ and a function $p:E\to B$, we define the \emph{polynomial functor} $P:\cat{Set}\to\cat{Set}$ as follows:
    \begin{enumerate}
    \item For $X\in\cat{Set}$, we have $X \mapsto \sum_{b\in B} X^{E_b}$
    \item For $f:X\to Y$, we have $f(X) \mapsto \sum_{b\in B} f(X)^{E_b}$
    \end{enumerate}

    with $E_b=p\inv\{b\}$ the fibre over $b$.
\end{definition}

(Note that by $X^{E_b}$ we mean the set of all functions $E_b\to X$, essentially equivalent to $E_b$-indexed subsets of $X$.)

The following identifications are freely made, and easy to convince oneself of:
\begin{lemma}[\emph{Kock~1.1.1}]
	For $p:E\to B$ and $X\in\cat{Set}$, the following hold:
	\begin{itemize}
		\item $\sum_{b\in B} E_{b} = E$,
		\item $\sum_{b\in B} X = B\times X$,
		\item $\prod_{e\in E} X = X^E$.
		\end{itemize}
\end{lemma}


\subsection{Slices and coslices}

When extending the theory of single-variable polynomial functors to the multivariate case, we might consider functors of the form
\begin{align*}
	(\cat{Set},\cat{Set},\cat{Set}) &\to \cat{Set}\\
    (X_1,X_2,X_3) &\mapsto X_1^2X_2 + X_3.
\end{align*}

This is all good, but there is a nicer way to label variables: \emph{slice categories}. If we are working with a polynomial in three variables, when taking the fibers over each $b$, we would like to specify whether $Eb$ takes us to fibers belonging to $X_1$, $X_2$ or $X_3$. In other words, we want to consider a bigger set $X$ `sliced' in three different parts.

We can achieve exactly that by making an \emph{indexing set} $I=\{1,2,3\}$ and slicing $\cat{Set}$. The resulting category is $(\cat{Set}\downarrow I)$, defined as follows:
\begin{itemize}
\item \emph{Objects:} maps $\pi:X\to I$.
\item \emph{Morphisms:} functions $f:X\to Y$ such that the diagram
\end{itemize}

\begin{figure}[ht!]
\centering
\begin{tikzcd}
X \arrow[dr,"\pi_X"'] \arrow[rr,"f"] & & Y \arrow[dl,"\pi_Y"]\\
& I &
\end{tikzcd}
\end{figure}
commutes.

In more intuitive terms: we classify the elements in $X$ indexing them to $I$ in all possible ways, through `classifiers' $\pi_X$, and a map between two specific slices $(X,\pi_X)\to(Y,\pi_Y)$ only makes sense in the slice category if the indexing is preserved, by means of the commutative diagram. The elements of the slice category can be thought of as pairs $(X,\pi_X)$, but the function $\pi_X$ already encodes enough information.

And like most things in category theory, we have a dual concept to slices. Intuitively (hopefully); the opposite concept to `classification' is `specification'. Here comes the \emph{coslice category}: given an indexing set $I$, we coslice $\cat{Set}$ and get $(I\downarrow\cat{Set})$, defined as follows:
\begin{itemize}
\item \emph{Objects:} maps $\pi:I\to X$.
\item \emph{Morphisms:} functions $f:X\to Y$ such that the diagram
\end{itemize}

\begin{figure}[ht!]
\centering
\begin{tikzcd}
& I \arrow[dl,"\pi_X"'] \arrow[dr,"\pi_Y"] &\\
X \arrow[rr,"f"] & & Y
\end{tikzcd}
\end{figure}
commutes.

(explain `specifier' intuition ...)

\subsection{Pullbacks}
The categorical construction of the \emph{pullback} permeates thorough mathematics, and we use it widely. We define it here by its universal property, as is common in category theory.

\begin{definition}[Pullback]
	Given a category $\calC$, an object $Z$ and morphisms $f:X\to Z$ and $g:Y\to Z$, we call $X\times_{Z} Y$ the \emph{pullback} (or \emph{fibre product}) of $f$ and $g$ if (1) the following diagram commutes;

	\begin{center}
	\begin{tikzcd}
		X\times_Z Y \arrow[r,"p_2"] \arrow[d,"p_1"'] & Y \arrow[d,"g"]\\
		X \arrow[r,"f"'] & Z
	\end{tikzcd}
	\end{center}

	and (2) any other such commuting diagram factors uniquely through $X\times_Z Y$. More concretely, if we have some object $Q$ and morphisms $q_1:Q\to X$ and $q_2:Q\to Y$ making the diagram commute, then there is a unique morphism $u:Q\to X\times_Z Y$ such that $q_1 = p_1\circ u$ and $q_2 = p_2\circ u$, i.e. the following diagram commutes;

	\begin{center}
	\begin{tikzcd}
		Q \arrow[ddr,bend right,"q_1"'] \arrow[drr,bend left,"q_2"] \arrow[dr,dashed,"u"] & & \\
		& X\times_Z Y \arrow[r,"p_2"] \arrow[d,"p_1"'] & Y \arrow[d,"g"]\\
		& X \arrow[r,"f"'] & Z
	\end{tikzcd}
	\end{center}

\end{definition}

More intuitively; the pullback is the `most general way' to complete a pair of morphisms into a commutative square. In concrete, set-theoretical terms, the pullback organizes the agreeing fibres of two functions with equal codomain in the most efficient way possible.


\subsection{$p^*$ -- pullback functor}

The characteristic function $p:E\to B$ of a polynomial functor induces a functor $p^*:(\catset\downarrow B)\to(\catset\downarrow E)$ sending maps $f:Y\to B$ to the pullback $Y\times_B E$.

More concretely, $p^* Y = Y\times_B E = \sum_{e\in E} Y_{p(e)}$ where maps are implicit. The fibre over some $e\in E$ is of course given by $Y_{p(e)}$. In more intuitive terms, this functor nicely organizes elements in $Y$ and $E$, with respect to fibres over $B$.


\subsection{Adjoint functors}

\begin{definition}[Adjoint, \emph{Leinster~2.1.1}]
	Whenever we have two functors
	\begin{tikzcd}
		\calA \arrow[r,shift left,"F"] & \arrow[l,shift left,"G"] \calB
	\end{tikzcd},
	we say that $F$ is \emph{left-adjoint} to $G$ and write $F \dashv G$ if
	\begin{align*}
		\Hom_\calB(F(A),B) \cong \Hom_\calA(F,G(B))
	\end{align*}
	naturally in $A\in\calA$ and $B\in\calB$.
\end{definition}

By \emph{naturally}, we mean that our choice of isomorphism is done in the most `general way'. Concretely, given $g\in\Hom_\calB(F(A),B)$, we denote by $\overline{g}\in\Hom_\calA(A,G(B))$ the map induced by the isomorphism of $\Hom$-sets, and in the other direction, $f\in\Hom_\calA(A,G(B))$ gives $\overline{f}\in\Hom_\calB(F(A),B)$. (Note that $\overline{\overline{f}}=f$.) Naturality then says the following;
\begin{align*}
	\overline{\left(F(A) \overset{g}{\longrightarrow} B \overset{q}{\longrightarrow} B'\right)} = \left( A \overset{\overline{g}}{\longrightarrow} G(B) \overset{G(q)}{\longrightarrow} G(B') \right)
\end{align*} ($\overline{q\circ g} = G(q)\circ\overline{g}$) for all $g$ and $q$, and
\begin{align*}
	\overline{\left( A' \overset{p}{\longrightarrow} A \overset{f}{\longrightarrow} G(B) \right)} = \left( F(A') \overset{F(p)}{\longrightarrow} F(A) \overset{\overline{f}}{\longrightarrow} B \right)
\end{align*}
for any $p$ and $q$.

For now, we care about two properties of adjoints, the first one empirical: (1) there is a good chance that a pair of opposing functors are adjoint, and (2) if a functor has a left-adjoint, it is unique up to isomorphism.


\subsection{Adjoint functors through units and counits}
Fixing $A\in\calA$, we have the identity morphism $F(A) \overset{1_\calB}{\longrightarrow} F(A)$, which by left-adjunction corresponds to a morphism $A \overset{\eta_A}{\longrightarrow} GF(A)$, letting $B=F(A)$ in the previous definition. This gives the collection of \emph{units} of our adjunction (note that each $\eta_{(-)}$ is the adjoint of the identity morphism in $\calB$).

Similarly, fixing $B\in\calB$, from the identity morphism $G(B) \overset{1_\calA}{\longrightarrow} G(B)$ we obtain by right-adjunction the morphism $FG(B) \overset{\epsilon_B}{\longrightarrow} B$, letting $A=G(B)$. This again gives the collection of \emph{counits} of our adjunction (with each $\epsilon_{(-)}$ being the adjoint of the identity morphism in $\calA$).

We claim that $\eta : 1_\calB \to G\circ F$ and $\epsilon : F\circ G \to 1_\calA$ are natural transformations. This should be intuitive, from the fact that how we obtained each unit and counit had nothing to do with specific $A$'s and $B$'s or morphisms in the respective categories: we only used the assumption that an identity exists for each element, and that we can adjoin it in a natural way (and this `natural' detail is key).

\subsection{$p_*$ -- adjoint functor}

\subsection{$p_!$ -- ?? functor}

\subsection{Adjoints}
The idea of two morphisms being adjoint arises everywhere in mathematics (i bet you hadn't heard that before). Let's see an example: consider the forgetful functor $U:\cat{Vect_k}\to\cat{Set}$ that sends a vector space $V$ to its underlying set $U(V)$, forgetting the structure, and the functor $F:\cat{Set}\to\cat{Vect_k}$ which constructs the free vector space from any set $S$. Instead of explicitly writing $F$, it is most convenient to consider a simple case and then state the universal property which makes the general idea of a \emph{free functor} useful.

For a set $S=\{a,b,c\}$, we define the \emph{free monoid} $F(S)$ to be all strings of `words' from $S$, e.g. $abc\in F(S)$, $aaaaaa\in F(S)$, etc. with concatenation. Furthermore, for $F$ to be a functor we must make sure that functions $S\to S'$ are nicely mapped to monoid homomorphisms $F(S)\to F(S')$ ; ....??? Note that most monoids can be constructed from the free functor on some set, but that $F\circ U\neq 1$.
