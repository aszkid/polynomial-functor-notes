% !TEX root=main.tex

\section{Note 2 -- the polynomial functor}

\subsection{Multivariate polynomials}

Recall that from a map $\phi: E\to B$ arise three functors:
\begin{center}
\begin{tikzcd}
  \catset/B \arrow[r,"\phi^*" description] & \arrow[l,bend left,"\phi_*"] \arrow[l,bend right,"\phi_!"'] \catset/E
\end{tikzcd}
\end{center}
with $\phi_! \dashv \phi^* \dashv \phi_*$. These functors are sometimes referred to as $\Sigma_\phi = \phi_!$ (\emph{dependent sum}), $\Delta_\phi = \phi^*$ (\emph{pullback}) and $\Pi_\phi = \phi_*$. (\emph{dependent product}) We shall use the first convention.

In its full generality, a polynomial functor $P:(\catset/I)\to(\catset/J)$ is described by a diagram of the form
\begin{center}
\begin{tikzcd}
    & E \arrow[dl,"s"'] \arrow[r,"p"] & B \arrow[dr,"t"] & \\
  I &   &   & J\\
    & X \arrow[ul,dashed] &   &
\end{tikzcd}
\end{center}

and it is explicitly given by $P=t_!p_*s^*$ acting on any set $X$ over $I$. To see how this makes sense, we unpack the definition:
\begin{align*}
  P(X) &= t_!p_*s^*\left( X_i \mid i\in I \right)\\
    &= t_!p_*\left( X_{s(e)} \mid e\in E \right)\\
    &= t_!\left( \prod_{e\in E_b} X_{s(e)} \mid b\in B \right)\\
    &= \left( \sum_{b\in B_j}\prod_{e\in E_b} X_{s(e)} \mid j\in J \right).
\end{align*}

Note that we can coherently follow the chain of functors
\[
  \catset/I \overset{s^*}{\rightarrow} \catset/E \overset{p_*}{\rightarrow} \catset/B \overset{t_!}{\rightarrow} \catset/J
\]
by looking at each line in the expansion. First, we group fibres of $X$ over $s(e)$ to agree with $E$ in terms of the indexing set; then we multiply the fibres that get mapped to the same term in the polynomial, represented by each element in $B$; and finally we add all the terms together and produce the polynomials indexed by $J$.

\subsection{Example}

An example might help clarify this abstract talk into more concrete terms. Consider the polynomial functor $X_1+X_1X_2 + X_1^2X_3$: this is a polynomial functor in three variables, so $I=\set{1,2,3}$; it has three terms, so $B=\set{a,b,c}$; it is made up of a total of six monomials, so $E=\set{(a,1), (b,1), (b,2), (c,1), (c,1)', (c,3)}$. In this case, $J=\set{\alpha}$ gives a single polynomial.

The map $s$ projects the second element of each pair; the map $p$ projects the first one; and $t$ sends everything to $\alpha$. See Table~\ref{table:polyrep} for a succint view.
\begin{table}[]
\centering
\caption{Graphical representation of $X_1+X_1X_2+X_1^2X_3$. The left column is $I$, the center region is $E$, and the bottom row is $B$. `Accumulate' points vertically ($p$) or horizontally ($s$).}
\begin{tabular}{c|ccc}\label{table:polyrep}
1 & $\bullet$ & $\bullet$ & $\bullet\bullet$\\
2 &   & $\bullet$ &   \\
3 &   &   & $\bullet$ \\ \hline
  & a  & b  & c
\end{tabular}
\end{table}



\subsection{Beck-Chevalley and Distributivity}
The \emph{Beck-Chevalley isomorphisms} prove to be a powerful tool to chase diagrams made up of combinations of the three functors we have defined. Given a pullback square
\begin{center}
\begin{tikzcd}
  \cdot \arrow[dr, phantom, "\lrcorner", very near start] \arrow[r,"g"] \arrow[d,"u"'] & \cdot \arrow[d,"v"]\\
  \cdot \arrow[r,"f"'] & \cdot
\end{tikzcd}
\end{center}
the Beck-Chevalley isomorphisms read
\begin{equation*}
  g_!u^* \cong v^*f_! \quad \text{and} \quad g_*u^* \cong v^*f_*.
\end{equation*}

\pagebreak
